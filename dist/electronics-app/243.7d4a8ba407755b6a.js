"use strict";(self.webpackChunkElectronics_App=self.webpackChunkElectronics_App||[]).push([[243],{3243:(w,d,o)=>{o.r(d),o.d(d,{PaymentDataComponent:()=>B});var p=o(177),l=o(4341),t=o(4438),_=o(231),u=o(4705),C=o(1626);let n=(()=>{class i{constructor(e){this._HttpClient=e,this.baseLink="http://localhost:4200",this.Token=`Bearer ${localStorage.getItem("token")}`}MakePayment(e,a){return this._HttpClient.post(`https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/paymob/${e}?baseFrontServer=${encodeURIComponent(this.baseLink)}`,a,{headers:new C.Lr({Authorization:this.Token})})}static#t=this.\u0275fac=function(a){return new(a||i)(t.KVO(C.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function c(i,s){1&i&&(t.j41(0,"p"),t.EFF(1," You must enter Your City "),t.k0s())}function b(i,s){if(1&i&&(t.j41(0,"div",29),t.DNE(1,c,2,0,"p",30),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.BillingDetails.get("city"))||null==e.errors?null:e.errors.required)}}function y(i,s){1&i&&(t.j41(0,"p"),t.EFF(1," You must enter your street "),t.k0s())}function P(i,s){if(1&i&&(t.j41(0,"div",29),t.DNE(1,y,2,0,"p",30),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.BillingDetails.get("street"))||null==e.errors?null:e.errors.required)}}function D(i,s){1&i&&(t.j41(0,"p"),t.EFF(1," You must enter your building "),t.k0s())}function F(i,s){if(1&i&&(t.j41(0,"div",29),t.DNE(1,D,2,0,"p",30),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.BillingDetails.get("building"))||null==e.errors?null:e.errors.required)}}function k(i,s){1&i&&(t.j41(0,"p"),t.EFF(1," You must enter your floor "),t.k0s())}function E(i,s){if(1&i&&(t.j41(0,"div",29),t.DNE(1,k,2,0,"p",30),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.BillingDetails.get("floor"))||null==e.errors?null:e.errors.required)}}function j(i,s){1&i&&(t.j41(0,"p"),t.EFF(1," You must enter your Phone "),t.k0s())}function $(i,s){1&i&&(t.j41(0,"p"),t.EFF(1," You must enter a valid Egyptian Phone "),t.k0s())}function I(i,s){if(1&i&&(t.j41(0,"div",29),t.DNE(1,j,2,0,"p",30)(2,$,2,0,"p",30),t.k0s()),2&i){let e,a;const r=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=r.BillingDetails.get("Phone"))||null==e.errors?null:e.errors.required),t.R7$(),t.Y8G("ngIf",null==(a=r.BillingDetails.get("Phone"))||null==a.errors?null:a.errors.pattern)}}function T(i,s){if(1&i&&(t.j41(0,"div",31)(1,"div"),t.nrm(2,"img",32),t.j41(3,"span"),t.EFF(4),t.k0s()(),t.j41(5,"div"),t.EFF(6),t.k0s()()),2&i){const e=s.$implicit;t.R7$(2),t.FS9("src",e.product.images[0],t.B4B),t.R7$(2),t.JRh(e.product.Name),t.R7$(2),t.SpI("",e.product.price*e.quantity,"EGP")}}function G(i,s){1&i&&t.nrm(0,"i",33)}let B=(()=>{class i{constructor(e,a,r,m){this._spinner=e,this._FormBuilder=a,this._ProductService=r,this._PaymentServices=m,this.CartProducts=[],this.TotalPrice=0,this.Quantity=1,this.cartId="",this.IsLoading=!1,this.BillingDetails=this._FormBuilder.group({city:["",[l.k0.required]],street:["",[l.k0.required]],building:["",[l.k0.required]],floor:["",[]],Phone:["",[l.k0.required,l.k0.pattern(/^01[0125]\d{8}$/)]]})}onSubmit(){this.IsLoading=!0,this._PaymentServices.MakePayment(this.cartId,this.BillingDetails.value).subscribe({next:e=>{console.log(e),"Success"===e.status&&(window.open(e.paymentLink,"_self"),this.IsLoading=!1)},error:e=>{this.IsLoading=!0}})}ngOnInit(){this._spinner.show(),this._ProductService.GetCartProducts().subscribe({next:e=>{this.CartProducts=e.data.items,this.TotalPrice=e.totalPrice,this.cartId=e.data._id,e?this._spinner.hide():this._spinner.show()},error:e=>{console.log(e)}})}static#t=this.\u0275fac=function(a){return new(a||i)(t.rXU(_.D),t.rXU(l.ok),t.rXU(u.b),t.rXU(n))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-payment-data"]],standalone:!0,features:[t.aNF],decls:64,vars:11,consts:[[1,"container"],[1,"row"],[1,"col-12","mt-4"],[1,"fw-bold"],[1,"col-lg-6","mb-5","mb-lg-0"],[1,"h-100"],[1,"py-5","px-md-5"],[1,"mb-2"],[3,"ngSubmit","formGroup"],[1,"form-outline","mb-4"],["type","city","id","form3Example3","placeholder","Town/City","formControlName","city",1,"form-control"],["class","bg-error",4,"ngIf"],["type","street","id","form3Example4","placeholder","street","formControlName","street",1,"form-control"],["type","building","id","form3Example4","placeholder","building","formControlName","building",1,"form-control"],["type","floor","id","form3Example4","placeholder","floor","formControlName","floor",1,"form-control"],["type","Phone","id","form3Example4","placeholder","Phone","formControlName","Phone",1,"form-control"],[1,"col-lg-6","mb-5","mb-lg-0","d-flex","justify-content-center","align-items-center","py-5","px-md-5",2,"flex-direction","column","padding","20px 0"],["style","width: 80%","class","d-flex justify-content-between align-items-center mb-3",4,"ngFor","ngForOf"],[2,"width","80%"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mt-2","d-flex","justify-content-between","align-items-center",2,"width","80%"],["src","./assets/payment.png","alt",""],[1,"input-group","mt-3",2,"width","80%"],["type","search","placeholder","Coupon Code","aria-label","Search","aria-describedby","search-addon",1,"form-control","rounded"],["type","button","data-mdb-ripple-init","",1,"main-btn"],[1,"d-flex","justify-content-between","align-items-center","mb-4","mt-3",2,"width","80%"],["type","submit",1,"main-btn",3,"click","disabled"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"bg-error"],[4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mb-3",2,"width","80%"],["width","40","alt","",3,"src"],[1,"fas","fa-spinner","fa-spin"]],template:function(a,r){if(1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"p"),t.EFF(5,"Account / MyAccount / Product / View Cart / "),t.j41(6,"span",3),t.EFF(7,"Checkout"),t.k0s()()()(),t.j41(8,"div",4)(9,"div",5)(10,"div",6)(11,"div")(12,"h2",7),t.EFF(13,"Billing Details"),t.k0s(),t.j41(14,"p"),t.EFF(15,"Enter your details below"),t.k0s()(),t.j41(16,"form",8),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(17,"div",9),t.nrm(18,"input",10),t.DNE(19,b,2,1,"div",11),t.k0s(),t.j41(20,"div",9),t.nrm(21,"input",12),t.DNE(22,P,2,1,"div",11),t.k0s(),t.j41(23,"div",9),t.nrm(24,"input",13),t.DNE(25,F,2,1,"div",11),t.k0s(),t.j41(26,"div",9),t.nrm(27,"input",14),t.DNE(28,E,2,1,"div",11),t.k0s(),t.j41(29,"div",9),t.nrm(30,"input",15),t.DNE(31,I,3,2,"div",11),t.k0s()()()()(),t.j41(32,"div",16),t.DNE(33,T,7,3,"div",17),t.j41(34,"div",18)(35,"div",19)(36,"p"),t.EFF(37,"Subtotal"),t.k0s(),t.j41(38,"p"),t.EFF(39),t.k0s()(),t.nrm(40,"hr"),t.j41(41,"div",20)(42,"p"),t.EFF(43,"Shipping"),t.k0s(),t.j41(44,"p"),t.EFF(45,"Free"),t.k0s()(),t.nrm(46,"hr"),t.j41(47,"div",20)(48,"p",3),t.EFF(49,"Total"),t.k0s(),t.j41(50,"p",3),t.EFF(51),t.k0s()()(),t.j41(52,"div",21)(53,"p",3),t.EFF(54,"Bank"),t.k0s(),t.nrm(55,"img",22),t.k0s(),t.j41(56,"div",23),t.nrm(57,"input",24),t.j41(58,"button",25),t.EFF(59," Apply Coupon "),t.k0s()(),t.j41(60,"div",26)(61,"button",27),t.bIt("click",function(){return r.onSubmit()}),t.EFF(62," Place Order "),t.DNE(63,G,1,0,"i",28),t.k0s()()()()()),2&a){let m,h,f,g,v;t.R7$(16),t.Y8G("formGroup",r.BillingDetails),t.R7$(3),t.Y8G("ngIf",(null==(m=r.BillingDetails.get("city"))?null:m.errors)&&(null==(m=r.BillingDetails.get("city"))?null:m.touched)),t.R7$(3),t.Y8G("ngIf",(null==(h=r.BillingDetails.get("street"))?null:h.errors)&&(null==(h=r.BillingDetails.get("street"))?null:h.touched)),t.R7$(3),t.Y8G("ngIf",(null==(f=r.BillingDetails.get("building"))?null:f.errors)&&(null==(f=r.BillingDetails.get("building"))?null:f.touched)),t.R7$(3),t.Y8G("ngIf",(null==(g=r.BillingDetails.get("floor"))?null:g.errors)&&(null==(g=r.BillingDetails.get("floor"))?null:g.touched)),t.R7$(3),t.Y8G("ngIf",(null==(v=r.BillingDetails.get("Phone"))?null:v.errors)&&(null==(v=r.BillingDetails.get("Phone"))?null:v.touched)),t.R7$(2),t.Y8G("ngForOf",r.CartProducts),t.R7$(6),t.SpI("",r.TotalPrice," EGP"),t.R7$(12),t.SpI("",r.TotalPrice," EGP"),t.R7$(10),t.Y8G("disabled",r.BillingDetails.invalid),t.R7$(2),t.Y8G("ngIf",r.IsLoading)}},dependencies:[p.MD,p.Sq,p.bT,l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD]})}return i})()},4705:(w,d,o)=>{o.d(d,{b:()=>_});var p=o(1626),l=o(4412),t=o(4438);let _=(()=>{class u{constructor(n){this._HttpClient=n,this.Token=`Bearer ${localStorage.getItem("token")}`,this.CartItems=new l.t(0)}GetAllProduct(n=8,c=1){return this._HttpClient.get(`https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Product?page=${c}&limit=${n}`)}filterProduct(n=null,c="",b=null,y=null,P=null){return this._HttpClient.get(`https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Product?name=${n}&categoryName=${c}&brandName=${b}&maxPrice=${y}&minPrice=${P}`)}SearchProducts(n){return this._HttpClient.get(`https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Product?name=${n}`)}GetSaleProduct(n,c){return this._HttpClient.get(`https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Product/sale/discount?page=${c||1}&limit=${n||8}`)}GetBestseller(){return this._HttpClient.get("https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Product/best/seller?limit=4")}GetAllCategories(){return this._HttpClient.get("https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/categories")}GetCategoryBrand(n){return this._HttpClient.get(`https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Categorybrands/${n}`)}GetCategoryProducts(n){return this._HttpClient.get(`https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Product?categoryName=${n}`)}GetAllBrands(){return this._HttpClient.get("https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Brand")}GetProductDetails(n){return this._HttpClient.get(`https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Product/${n}`)}GetRelatedProduct(n){return this._HttpClient.get(`https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/product/related/${n}`)}AddProductToCart(n,c){return this._HttpClient.post("https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Cart/",{},{headers:new p.Lr({Authorization:this.Token,productid:n,quantity:c.toString()})})}GetCartProducts(){return this._HttpClient.get("https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Cart/",{headers:new p.Lr({Authorization:this.Token})})}RemoveCartProducts(n){return this._HttpClient.delete("https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Cart/",{headers:new p.Lr({Authorization:this.Token,ProductId:n})})}AddProductToFav(n){return this._HttpClient.post("https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Wishlist",{},{headers:new p.Lr({Authorization:this.Token,productid:n})})}RemoveProductFromFav(n){return this._HttpClient.delete("  https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Wishlist/",{headers:new p.Lr({Authorization:this.Token,productid:n})})}GetFavProducts(){return this._HttpClient.get("https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Wishlist/",{headers:new p.Lr({Authorization:this.Token})})}GetOrdersProducts(){return this._HttpClient.get("https://web-api-ecommerce-byahmedsafwat.vercel.app/api/v1/Cart/ConfirmedOders",{headers:new p.Lr({Authorization:this.Token})})}static#t=this.\u0275fac=function(c){return new(c||u)(t.KVO(p.Qq))};static#e=this.\u0275prov=t.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()}}]);